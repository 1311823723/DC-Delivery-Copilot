2026-01-31 09:59:55.001 [INFO ] [G889820260131000] [T889820260131000] o.s.s.s.TaskUtils$LoggingErrorHandler - 任务调度器心跳检查正常...
2026-01-31 09:59:58.200 [INFO ] [G889820260131000] [T889820260131000] c.z.h.HikariDataSource - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2026-01-31 10:00:00.005 [INFO ] [G889820260131101] [T889820260131001] c.f.l.c.LoanController - 收到放款申请请求: 用户[ZhangSan], 金额[50000.00], 申请单号[APP20260131001]
2026-01-31 10:00:00.010 [INFO ] [G889820260131102] [T889820260131002] c.f.l.c.LoanController - 收到放款申请请求: 用户[WangWu], 金额[10000.00], 申请单号[APP20260131002]
2026-01-31 10:00:00.150 [INFO ] [G889820260131101] [T889820260131001] c.f.l.s.RiskClient - [ZhangSan] 风控准入校验通过: Score[95], Level[LOW_RISK]
2026-01-31 10:00:00.160 [INFO ] [G889820260131102] [T889820260131002] c.f.l.s.RiskClient - [WangWu] 风控准入校验通过: Score[88], Level[LOW_RISK]
2026-01-31 10:00:00.210 [INFO ] [G889820260131101] [T889820260131001] c.f.l.s.LoanCoreService - [ZhangSan] 借据创建成功: 借据号[DB2026013100088], 状态[INIT]
2026-01-31 10:00:00.215 [INFO ] [G889820260131101] [T889820260131001] c.f.l.i.DepositFeignClient - [ZhangSan] 开始调用存款服务进行入账: AcctNo[62220001], Amount[50000.00]
2026-01-31 10:00:00.220 [INFO ] [G889820260131102] [T889820260131002] c.f.l.s.LoanCoreService - [WangWu] 借据创建成功: 借据号[DB2026013100089], 状态[INIT]
2026-01-31 10:00:00.225 [INFO ] [G889820260131102] [T889820260131002] c.f.l.i.DepositFeignClient - [WangWu] 开始调用存款服务进行入账: AcctNo[62220002], Amount[10000.00]
2026-01-31 10:00:00.500 [INFO ] [G889820260131103] [T889820260131003] c.f.l.c.LoanController - 收到放款申请请求: 用户[ZhaoLiu], 金额[999999.00], 申请单号[APP20260131003]
2026-01-31 10:00:00.550 [WARN ] [G889820260131103] [T889820260131003] c.f.l.s.RiskClient - [ZhaoLiu] 风控准入校验拒绝: Score[40], Level[HIGH_RISK], Reason[多头借贷]
2026-01-31 10:00:00.560 [INFO ] [G889820260131103] [T889820260131003] c.f.l.s.LoanCoreService - [ZhaoLiu] 申请被拒，流程结束
2026-01-31 10:00:00.690 [INFO ] [G889820260131101] [T889820260131001] c.f.l.i.DepositFeignClient - [ZhangSan] 存款服务调用成功: ResponseCode[0000]
2026-01-31 10:00:00.700 [INFO ] [G889820260131102] [T889820260131002] c.f.l.i.DepositFeignClient - [WangWu] 存款服务调用成功: ResponseCode[0000]
2026-01-31 10:00:00.710 [INFO ] [G889820260131101] [T889820260131001] c.f.l.s.LoanCoreService - [ZhangSan] 流程结束: 借据状态更新为[DISBURSED], 交易耗时[705ms]
2026-01-31 10:00:00.720 [INFO ] [G889820260131102] [T889820260131002] c.f.l.s.LoanCoreService - [WangWu] 流程结束: 借据状态更新为[DISBURSED], 交易耗时[710ms]
2026-01-31 10:01:00.001 [INFO ] [G889820260131800] [T889820260131800] c.f.l.j.OverdueScanner - 开始执行[逾期扫描]定时任务...
2026-01-31 10:01:00.050 [INFO ] [G889820260131800] [T889820260131800] c.f.l.j.OverdueScanner - 扫描到逾期借据: Count[0], Cost[49ms]
2026-01-31 10:02:15.001 [INFO ] [G889820260131104] [T889820260131004] c.f.l.c.LoanController - 收到放款申请请求: 用户[SunQi], 金额[3000.00], 申请单号[APP20260131004]
2026-01-31 10:02:15.080 [INFO ] [G889820260131104] [T889820260131004] c.f.l.s.RiskClient - [SunQi] 风控准入校验通过
2026-01-31 10:02:15.120 [INFO ] [G889820260131104] [T889820260131004] c.f.l.s.LoanCoreService - [SunQi] 借据创建成功: 借据号[DB2026013100095]
2026-01-31 10:02:15.130 [INFO ] [G889820260131104] [T889820260131004] c.f.l.i.DepositFeignClient - [SunQi] 开始调用存款服务进行入账
2026-01-31 10:02:15.450 [INFO ] [G889820260131104] [T889820260131004] c.f.l.i.DepositFeignClient - [SunQi] 存款服务调用成功
2026-01-31 10:02:15.460 [INFO ] [G889820260131104] [T889820260131004] c.f.l.s.LoanCoreService - [SunQi] 流程结束
2026-01-31 10:03:00.000 [INFO ] [G889820260131000] [T889820260131000] c.z.h.HikariDataSource - HikariPool-1 - Pool stats (total=10, active=1, idle=9, waiting=0)
2026-01-31 10:04:00.000 [INFO ] [G889820260131000] [T889820260131000] c.z.h.HikariDataSource - HikariPool-1 - Pool stats (total=10, active=0, idle=10, waiting=0)
2026-01-31 10:05:30.100 [INFO ] [G889820260131555] [T889820260131099] c.f.l.c.LoanController - 收到放款申请请求: 用户[LiSi], 金额[2000000.00], 申请单号[APP20260131055]
2026-01-31 10:05:30.150 [INFO ] [G889820260131555] [T889820260131099] c.f.l.s.LoanCoreService - 大额贷款预警: 金额超过阈值, 进入人工复核流程(模拟自动通过)
2026-01-31 10:05:30.200 [INFO ] [G889820260131555] [T889820260131099] c.f.l.i.DepositFeignClient - 开始调用存款服务进行入账: AcctNo[62220099], Amount[2000000.00]
2026-01-31 10:05:30.650 [ERROR] [G889820260131555] [T889820260131099] c.f.l.i.DepositFeignClient - 远程调用失败，原因：下游服务返回异常. Status[500], Body[{"code":"500","msg":"账户状态异常"}]
2026-01-31 10:05:30.655 [ERROR] [G889820260131555] [T889820260131099] c.f.l.s.LoanCoreService - 放款交易异常，执行事务回滚。借据号[DB2026013100099]
2026-01-31 10:05:30.660 [INFO ] [G889820260131555] [T889820260131099] c.f.l.s.LoanCoreService - 借据状态已更新为[FAILED], 触发告警通知
2026-01-31 10:05:31.000 [INFO ] [G889820260131105] [T889820260131005] c.f.l.c.LoanController - 收到放款申请请求: 用户[ZhouBa], 金额[5000.00], 申请单号[APP20260131005]
2026-01-31 10:05:31.050 [INFO ] [G889820260131105] [T889820260131005] c.f.l.s.RiskClient - [ZhouBa] 风控准入校验通过
2026-01-31 10:05:31.100 [INFO ] [G889820260131105] [T889820260131005] c.f.l.s.LoanCoreService - [ZhouBa] 借据创建成功: 借据号[DB2026013100096]
2026-01-31 10:05:31.110 [INFO ] [G889820260131105] [T889820260131005] c.f.l.i.DepositFeignClient - [ZhouBa] 开始调用存款服务进行入账
2026-01-31 10:05:31.400 [INFO ] [G889820260131105] [T889820260131005] c.f.l.i.DepositFeignClient - [ZhouBa] 存款服务调用成功
2026-01-31 10:05:31.410 [INFO ] [G889820260131105] [T889820260131005] c.f.l.s.LoanCoreService - [ZhouBa] 流程结束
2026-01-31 10:15:00.000 [INFO ] [G889820260131000] [T889820260131000] c.z.h.HikariDataSource - HikariPool-1 - Pool stats (total=10, active=2, idle=8, waiting=0)
2026-01-31 10:15:00.005 [INFO ] [G889820260131999] [T889820260131999] o.s.b.a.e.mvc.EndpointHandlerMapping - Mapped "{[/actuator/health],methods=[GET]}"
2026-01-31 10:15:00.010 [INFO ] [G889820260131999] [T889820260131999] o.s.b.a.e.h.HealthEndpoint - Health check status: UP
2026-01-31 10:30:00.005 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.controller.LoanApplyController - [入口] 收到贷款申请, 用户: ZhangSan, 金额: 50000.00
2026-01-31 10:30:00.008 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.controller.LoanApplyController - [入口] 收到贷款申请, 用户: LiSi, 金额: 10000.00
2026-01-31 10:30:00.012 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.check.BasicCheckService - [校验] 基础信息校验通过, 手机号实名认证一致
2026-01-31 10:30:00.015 [INFO ] [G889820260131003] [T889820260131103] c.b.loan.controller.LoanApplyController - [入口] 收到贷款申请, 用户: WangWu, 金额: 2000000.00
2026-01-31 10:30:00.020 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.check.BasicCheckService - [校验] 基础信息校验通过, 客户状态正常
2026-01-31 10:30:00.025 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.risk.RiskEngineService - [风控] 调用风控模型 V3.0, 特征向量生成中...
2026-01-31 10:30:00.030 [INFO ] [G889820260131003] [T889820260131103] c.b.loan.service.check.BasicCheckService - [校验] 基础信息校验通过
2026-01-31 10:30:00.035 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.risk.RiskEngineService - [风控] 调用风控模型 V3.0
2026-01-31 10:30:00.045 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.risk.RiskEngineService - [风控] 评分结果: 780, 风险等级: LOW, 建议通过
2026-01-31 10:30:00.048 [INFO ] [G889820260131003] [T889820260131103] c.b.loan.service.risk.RiskEngineService - [风控] 检测到大额敏感交易, 启动强风控策略
2026-01-31 10:30:00.050 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.quota.QuotaService - [额度] 尝试锁定额度 50000.00
2026-01-31 10:30:00.055 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.risk.RiskEngineService - [风控] 评分结果: 690, 风险等级: MEDIUM, 建议通过
2026-01-31 10:30:00.060 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.dao.QuotaMapper - [DB] SQL: UPDATE t_user_quota SET used = used + ? WHERE uid = ? (Params: 50000, U_ZS)
2026-01-31 10:30:00.065 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.quota.QuotaService - [额度] 尝试锁定额度 10000.00
2026-01-31 10:30:00.070 [ERROR] [G889820260131003] [T889820260131103] c.b.loan.service.risk.RiskEngineService - [异常] 触发风控熔断规则! 规则ID: RULE_HIGH_AMT_09
com.bank.loan.exception.RiskException: 申请金额超限，触发自动拒绝
    at com.bank.loan.service.risk.RiskEngineService.checkAmount(RiskEngineService.java:158)
    at com.bank.loan.service.risk.RiskEngineService.evaluate(RiskEngineService.java:45)
    at com.bank.loan.controller.LoanApplyController.apply(LoanApplyController.java:88)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.lang.Thread.run(Thread.java:748)
2026-01-31 10:30:00.075 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.quota.QuotaService - [额度] 锁定成功
2026-01-31 10:30:00.078 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.quota.QuotaService - [额度] 锁定成功
2026-01-31 10:30:00.080 [WARN ] [G889820260131003] [T889820260131103] c.b.loan.controller.LoanApplyController - [结束] 贷款申请被拒绝, 原因: 申请金额超限，触发自动拒绝
2026-01-31 10:30:00.085 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.disburse.DisburseService - [放款] 生成借据号: IOU-20260131-001
2026-01-31 10:30:00.090 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.disburse.DisburseService - [放款] 生成借据号: IOU-20260131-002
2026-01-31 10:30:00.095 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.remote.DepositFeignClient - [RPC] 请求存款中心入账...
2026-01-31 10:30:00.100 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.remote.DepositFeignClient - [RPC] 请求存款中心入账...
2026-01-31 10:30:00.520 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.remote.DepositFeignClient - [RPC] 存款中心响应: SUCCESS, 耗时: 425ms
2026-01-31 10:30:00.530 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.remote.DepositFeignClient - [RPC] 存款中心响应: SUCCESS, 耗时: 430ms
2026-01-31 10:30:00.535 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.service.notify.SmsService - [通知] 发送放款成功短信至 138****0001
2026-01-31 10:30:00.540 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.service.notify.SmsService - [通知] 发送放款成功短信至 139****0002
2026-01-31 10:30:00.545 [INFO ] [G889820260131001] [T889820260131101] c.b.loan.controller.LoanApplyController - [结束] 交易完成, 耗时: 540ms
2026-01-31 10:30:00.550 [INFO ] [G889820260131002] [T889820260131102] c.b.loan.controller.LoanApplyController - [结束] 交易完成, 耗时: 542ms
